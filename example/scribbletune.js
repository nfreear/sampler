!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.scribble=n():t.scribble=n()}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=9)}([function(t,n,e){"use strict";const r={shuffle:t=>{let n=t.length-1;return t.forEach((e,r)=>{let i=Math.round(Math.random()*n);t[r]=t[i],t[i]=e}),t},sizzleMap:t=>{t=t||127;let n=Math.PI,e=[n/6,n/4,n/3,n/2,2*n/3,3*n/4,5*n/6,n],r=[0,n/6,n/4,n/3,n/2,2*n/3,3*n/4,5*n/6];return r.reverse(),e.concat(r).map(n=>Math.round(Math.sin(n)*t))},expandStr:t=>(t=(t=(t=(t=JSON.stringify(t.split(""))).replace(/,"\[",/g,", [")).replace(/"\[",/g,"[")).replace(/,"\]"/g,"]"),JSON.parse(t)),isNote:t=>"string"==typeof t&&/^[a-gA-G](?:#|b)?\d$/.test(t)};t.exports=r},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"names",function(){return m}),e.d(r,"tokenize",function(){return M}),e.d(r,"props",function(){return g}),e.d(r,"name",function(){return v}),e.d(r,"pc",function(){return b}),e.d(r,"midi",function(){return A}),e.d(r,"midiToFreq",function(){return x}),e.d(r,"freq",function(){return E}),e.d(r,"freqToMidi",function(){return j}),e.d(r,"chroma",function(){return O}),e.d(r,"oct",function(){return _}),e.d(r,"stepToLetter",function(){return S}),e.d(r,"altToAcc",function(){return C}),e.d(r,"from",function(){return N}),e.d(r,"build",function(){return k}),e.d(r,"fromMidi",function(){return D}),e.d(r,"simplify",function(){return q}),e.d(r,"enharmonic",function(){return R});var i={};e.r(i),e.d(i,"range",function(){return F}),e.d(i,"rotate",function(){return z}),e.d(i,"compact",function(){return B}),e.d(i,"sort",function(){return U}),e.d(i,"unique",function(){return G}),e.d(i,"shuffle",function(){return L}),e.d(i,"permutations",function(){return V});var o={};e.r(o),e.d(o,"names",function(){return Z}),e.d(o,"tokenize",function(){return Q}),e.d(o,"props",function(){return rt}),e.d(o,"num",function(){return it}),e.d(o,"name",function(){return ot}),e.d(o,"semitones",function(){return ut}),e.d(o,"chroma",function(){return at}),e.d(o,"ic",function(){return st}),e.d(o,"build",function(){return ct}),e.d(o,"simplify",function(){return lt}),e.d(o,"invert",function(){return ft}),e.d(o,"fromSemitones",function(){return dt});var u={};e.r(u),e.d(u,"transpose",function(){return At}),e.d(u,"trFifths",function(){return xt}),e.d(u,"fifths",function(){return Et}),e.d(u,"transposeBy",function(){return wt}),e.d(u,"addIntervals",function(){return jt}),e.d(u,"add",function(){return Ot}),e.d(u,"subtract",function(){return _t}),e.d(u,"interval",function(){return St}),e.d(u,"semitones",function(){return It});var a={};e.r(a),e.d(a,"chroma",function(){return Rt}),e.d(a,"chromas",function(){return zt}),e.d(a,"modes",function(){return Bt}),e.d(a,"isChroma",function(){return Ut}),e.d(a,"intervals",function(){return Lt}),e.d(a,"isEqual",function(){return Vt}),e.d(a,"isSubsetOf",function(){return $t}),e.d(a,"isSupersetOf",function(){return Yt}),e.d(a,"includes",function(){return Jt}),e.d(a,"filter",function(){return Kt});var s={};e.r(s),e.d(s,"dictionary",function(){return Zt}),e.d(s,"combine",function(){return Qt}),e.d(s,"scale",function(){return Xt}),e.d(s,"chord",function(){return Wt}),e.d(s,"pcset",function(){return tn});var c={};e.r(c),e.d(c,"props",function(){return en}),e.d(c,"names",function(){return rn}),e.d(c,"intervals",function(){return on}),e.d(c,"notes",function(){return un}),e.d(c,"exists",function(){return an}),e.d(c,"tokenize",function(){return sn}),e.d(c,"modeNames",function(){return cn}),e.d(c,"chords",function(){return ln}),e.d(c,"toScale",function(){return fn}),e.d(c,"supersets",function(){return mn}),e.d(c,"subsets",function(){return pn});var l={};e.r(l),e.d(l,"names",function(){return dn}),e.d(l,"props",function(){return Mn}),e.d(l,"intervals",function(){return Pn}),e.d(l,"notes",function(){return yn}),e.d(l,"exists",function(){return gn}),e.d(l,"supersets",function(){return vn}),e.d(l,"subsets",function(){return bn}),e.d(l,"tokenize",function(){return xn});var f="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),m=function(t){return"string"!=typeof t?f.slice():f.filter(function(n){var e=n[1]||" ";return-1!==t.indexOf(e)})},p=m(" #"),d=m(" b"),h=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function M(t){"string"!=typeof t&&(t="");var n=h.exec(t);return n?[n[1].toUpperCase(),n[2].replace(/x/g,"##"),n[3],n[4]]:null}var P=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),y=[0,2,4,5,7,9,11],g=function(t,n){return void 0===n&&(n={}),function(e){return n[e]||(n[e]=t(e))}}(function(t){var n=M(t);if(""===n[0]||""!==n[3])return P;var e=n[0],r=n[1],i=n[2],o={letter:e,acc:r,octStr:i};return o.pc=o.letter+o.acc,o.name=o.pc+i,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length,o.oct=i.length?+i:null,o.chroma=(y[o.step]+o.alt+120)%12,o.midi=null!==o.oct?y[o.step]+o.alt+12*(o.oct+1):null,o.freq=x(o.midi),Object.freeze(o)}),v=function(t){return g(t).name},b=function(t){return g(t).pc},A=function(t){return g(t).midi||+t||null},x=function(t,n){return void 0===n&&(n=440),"number"==typeof t?Math.pow(2,(t-69)/12)*n:null},E=function(t){return g(t).freq||x(t)},w=Math.log(2),T=Math.log(440),j=function(t){var n=12*(Math.log(t)-T)/w+69;return Math.round(100*n)/100},O=function(t){return g(t).chroma},_=function(t){return g(t).oct},S=function(t){return"CDEFGAB"[t]},I=function(t,n){return Array(n+1).join(t)},C=function(t){return function(t,n){return"number"!=typeof t?"":n(t)}(t,function(t){return t<0?I("b",-t):I("#",t)})},N=function(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var e=n?Object.assign({},g(n),t):t,r=e.step,i=e.alt,o=e.oct,u=S(r);if(!u)return null;var a=u+C(i);return o||0===o?a+o:a},k=N;function D(t,n){return t=Math.round(t),(!0===n?p:d)[t%12]+(Math.floor(t/12)-1)}var q=function(t,n){var e=g(t),r=e.alt,i=e.chroma,o=e.midi;if(null===i)return null;var u=!1===n?r<0:r>0;return null===o?b(D(i,u)):D(o,u)},R=function(t){return q(t,!1)};function F(t,n){return null===t||null===n?[]:t<n?function(t,n){for(var e=[];n--;e[n]=n+t);return e}(t,n-t+1):function(t,n){for(var e=[];n--;e[n]=t-n);return e}(t,t-n+1)}function z(t,n){var e=n.length,r=(t%e+e)%e;return n.slice(r,e).concat(n.slice(0,r))}var B=function(t){return t.filter(function(t){return 0===t||t})},H=function(t){var n=A(t);return null!==n?n:A(t+"-100")};function U(t){return B(t.map(v)).sort(function(t,n){return H(t)>H(n)})}function G(t){return U(t).filter(function(t,n,e){return 0===n||t!==e[n-1]})}var L=function(t,n){var e,r;void 0===n&&(n=Math.random);for(var i=t.length;i;)e=n()*i--|0,r=t[i],t[i]=t[e],t[e]=r;return t},V=function(t){return 0===t.length?[[]]:V(t.slice(1)).reduce(function(n,e){return n.concat(t.map(function(n,r){var i=e.slice();return i.splice(r,0,t[0]),i}))},[])},$=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),Y=[0,2,4,5,7,9,11],J=[0,1,2,3,4,5,6,5,4,3,2,1],K="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),Z=function(t){return"string"!=typeof t?K.slice():K.filter(function(n){return-1!==t.indexOf(n[1])})},Q=function(t){var n=$.exec(t);return null===n?null:n[1]?[n[1],n[2]]:[n[4],n[3]]},X=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),W=function(t,n){return Array(Math.abs(n)+1).join(t)},tt=function(t){return(Math.abs(t)-1)%7},nt=function(t){var n=Q(t);if(null===n)return X;var e={num:+n[0],q:n[1]};return e.step=tt(e.num),e.type="PMMPPMM"[e.step],"M"===e.type&&"P"===e.q?X:(e.name=""+e.num+e.q,e.dir=e.num<0?-1:1,e.simple=8===e.num||-8===e.num?e.num:e.dir*(e.step+1),e.alt=function(t,n){return"M"===n&&"M"===t?0:"P"===n&&"P"===t?0:"m"===n&&"M"===t?-1:/^A+$/.test(n)?n.length:/^d+$/.test(n)?"P"===t?-n.length:-n.length-1:null}(e.type,e.q),e.oct=Math.floor((Math.abs(e.num)-1)/7),e.semitones=e.dir*(Y[e.step]+e.alt+12*e.oct),e.chroma=(e.dir*(Y[e.step]+e.alt)%12+12)%12,Object.freeze(e))},et={};function rt(t){return"string"!=typeof t?X:et[t]||(et[t]=nt(t))}var it=function(t){return rt(t).num},ot=function(t){return rt(t).name},ut=function(t){return rt(t).semitones},at=function(t){return rt(t).chroma},st=function(t){return"string"==typeof t&&(t=rt(t).chroma),"number"==typeof t?J[t%12]:null},ct=function(t){void 0===t&&(t={});var n=t.num,e=t.step,r=t.alt,i=t.oct;void 0===i&&(i=1);var o=t.dir;return void 0!==e&&(n=e+1+7*i),void 0===n?null:(o<0?"-":"")+n+function(t,n){return 0===n?"M"===t?"M":"P":-1===n&&"M"===t?"m":n>0?W("A",n):n<0?W("d","P"===t?n:n+1):null}("PMMPPMM"[tt(n)],r)},lt=function(t){var n=rt(t);return n===X?null:n.simple+n.q},ft=function(t){var n=rt(t);if(n===X)return null;var e=(7-n.step)%7,r="P"===n.type?-n.alt:-(n.alt+1);return ct({step:e,alt:r,oct:n.oct,dir:n.dir})},mt=[1,2,2,3,3,4,5,5,6,6,7,7],pt="P m M m M P d P m M m M".split(" "),dt=function(t){var n=t<0?-1:1,e=Math.abs(t),r=e%12,i=Math.floor(e/12);return n*(mt[r]+7*i)+pt[r]},ht=[0,2,4,-1,1,3,5],Mt=ht.map(function(t){return Math.floor(7*t/12)}),Pt=[3,0,4,1,5,2,6];var yt=function(t,n,e){var r=Pt[function(t){var n=(t+1)%7;return n<0?7+n:n}(t)],i=Math.floor((t+1)/7);return void 0===n?{step:r,alt:i,dir:e}:{step:r,alt:i,oct:n+4*i+Mt[r],dir:e}},gt=function(t){return function(t,n){return void 0===n&&(n={}),function(e){return n[e]||(n[e]=t(e))}}(function(n){var e=t(n);return null===e.name?null:function(t){var n=t.step,e=t.alt,r=t.oct,i=t.dir;void 0===i&&(i=1);var o=ht[n]+7*e;return null===r?[i*o]:[i*o,i*(r-Mt[n]-4*e)]}(e)})},vt=gt(g),bt=gt(rt);function At(t,n){if(1===arguments.length)return function(n){return At(t,n)};var e=vt(t),r=bt(n);if(null===e||null===r)return null;var i=1===e.length?[e[0]+r[0]]:[e[0]+r[0],e[1]+r[1]];return k(yt(i[0],i[1]))}function xt(t,n){if(1===arguments.length)return function(n){return xt(t,n)};var e=vt(t);return null===e?null:k(yt(e[0]+n))}function Et(t,n){if(1===arguments.length)return function(n){return Et(t,n)};var e=vt(t),r=vt(n);return null===r||null===e?null:r[0]-e[0]}function wt(t,n){return 1===arguments.length?function(n){return At(n,t)}:At(n,t)}var Tt=function(t){return function(t){return 7*t[0]+12*t[1]<0}(t)?yt(-t[0],-t[1],-1):yt(t[0],t[1],1)};function jt(t,n,e){var r=bt(t),i=bt(n);if(null===r||null===i)return null;var o=[r[0]+e*i[0],r[1]+e*i[1]];return ct(Tt(o))}function Ot(t,n){return 1===arguments.length?function(n){return Ot(t,n)}:jt(t,n,1)}function _t(t,n){return 1===arguments.length?function(n){return Ot(t,n)}:jt(t,n,-1)}function St(t,n){if(1===arguments.length)return function(n){return St(t,n)};var e=vt(t),r=vt(n);if(null===e||null===r||e.length!==r.length)return null;var i=1===e.length?[r[0]-e[0],-Math.floor(7*(r[0]-e[0])/12)]:[r[0]-e[0],r[1]-e[1]];return ct(Tt(i))}function It(t,n){if(1===arguments.length)return function(n){return It(t,n)};var e=g(t),r=g(n);return null!==e.midi&&null!==r.midi?r.midi-e.midi:null!==e.chroma&&null!==r.chroma?(r.chroma-e.chroma+12)%12:null}var Ct=e(7),Nt=e(8),kt=function(t){return O(t)||at(t)||0},Dt=function(t){return parseInt(Rt(t),2)},qt=function(t){return t.replace(/0/g,"").length};function Rt(t){if(Ut(t))return t;if(!Array.isArray(t))return"";var n=[0,0,0,0,0,0,0,0,0,0,0,0];return t.map(kt).forEach(function(t){n[t]=1}),n.join("")}var Ft=null;function zt(t){return Ft=Ft||F(2048,4095).map(function(t){return t.toString(2)}),"number"==typeof t?Ft.filter(function(n){return qt(n)===t}):Ft.slice()}function Bt(t,n){n=!1!==n;var e=Rt(t).split("");return B(e.map(function(t,r){var i=z(r,e);return n&&"0"===i[0]?null:i.join("")}))}var Ht=/^[01]{12}$/;function Ut(t){return Ht.test(t)}var Gt="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function Lt(t){return Ut(t)?B(t.split("").map(function(t,n){return"1"===t?Gt[n]:null})):[]}function Vt(t,n){return 1===arguments.length?function(n){return Vt(t,n)}:Rt(t)===Rt(n)}function $t(t,n){return arguments.length>1?$t(t)(n):(t=Dt(t),function(n){return(n=Dt(n))!==t&&(n&t)===n})}function Yt(t,n){return arguments.length>1?Yt(t)(n):(t=Dt(t),function(n){return(n=Dt(n))!==t&&(n|t)===n})}function Jt(t,n){return arguments.length>1?Jt(t)(n):(t=Rt(t),function(n){return"1"===t[kt(n)]})}function Kt(t,n){return 1===arguments.length?function(n){return Kt(t,n)}:n.filter(Jt(t))}var Zt=function(t){var n=Object.keys(t).sort(),e=[],r=[],i=function(t,n,i){e[t]=n,r[i]=r[i]||[],r[i].push(t)};n.forEach(function(n){var e=t[n][0].split(" "),r=t[n][1],o=Rt(e);i(n,e,o),r&&r.forEach(function(t){return i(t,e,o)})});var o=Object.keys(e).sort(),u=function(t){return e[t]};return u.names=function(t){return"string"==typeof t?(r[t]||[]).slice():(!0===t?o:n).slice()},u},Qt=function(t,n){var e=function(e){return t(e)||n(e)};return e.names=function(e){return t.names(e).concat(n.names(e))},e},Xt=Zt(Ct),Wt=Zt(Nt),tn=Qt(Xt,Wt),nn=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),en=function(t,n){return function(e){return n[e]||(n[e]=t(e))}}(function(t){var n=Xt(t);if(!n)return nn;var e={intervals:n,name:t};return e.chroma=Rt(n),e.setnum=parseInt(e.chroma,2),e.names=Xt.names(e.chroma),Object.freeze(e)},{}),rn=Xt.names,on=function(t){var n=sn(t);return en(n[1]).intervals};function un(t,n){var e=sn(t);return n=n||e[1],on(n).map(At(e[0]))}function an(t){var n=sn(t);return void 0!==Xt(n[1])}function sn(t){if("string"!=typeof t)return["",""];var n=t.indexOf(" "),e=v(t.substring(0,n))||v(t)||"",r=""!==e?t.substring(e.length+1):t;return[e,r.length?r:""]}var cn=function(t){var n=on(t),e=un(t);return Bt(n).map(function(t,r){var i=Xt.names(t)[0];if(i)return[e[r]||n[r],i]}).filter(function(t){return t})},ln=function(t){var n=$t(on(t));return Wt.names().filter(function(t){return n(Wt(t))})},fn=function(t){var n=B(t.map(b));if(!n.length)return n;var e=n[0],r=G(n);return z(r.indexOf(e),r)},mn=function(t){if(!on(t).length)return[];var n=Yt(on(t));return Xt.names().filter(function(t){return n(Xt(t))})},pn=function(t){var n=$t(on(t));return Xt.names().filter(function(t){return n(Xt(t))})},dn=Wt.names,hn=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),Mn=function(t,n){return void 0===n&&(n={}),function(e){return n[e]||(n[e]=t(e))}}(function(t){var n=Wt(t);if(!n)return hn;var e={intervals:n,name:t};return e.chroma=Rt(n),e.setnum=parseInt(e.chroma,2),e.names=Wt.names(e.chroma),e}),Pn=function(t){return Mn(xn(t)[1]).intervals};function yn(t,n){var e=xn(t);return n=n||e[1],Mn(n).intervals.map(At(e[0]))}var gn=function(t){return void 0!==Wt(xn(t)[1])},vn=function(t){if(!Pn(t).length)return[];var n=Yt(Pn(t));return Wt.names().filter(function(t){return n(Wt(t))})},bn=function(t){var n=$t(Pn(t));return Wt.names().filter(function(t){return n(Wt(t))})},An=/^(6|64|7|9|11|13)$/;function xn(t){var n=M(t);return""===n[0]?["",t]:"A"===n[0]&&"ug"===n[3]?["","aug"]:An.test(n[2])?[n[0]+n[1],n[2]+n[3]]:[n[0]+n[1]+n[2],n[3]]}e.d(n,"transpose",function(){return En}),e.d(n,"interval",function(){return wn}),e.d(n,"note",function(){return Tn}),e.d(n,"midi",function(){return jn}),e.d(n,"freq",function(){return On}),e.d(n,"chord",function(){return _n}),e.d(n,"scale",function(){return Sn}),e.d(n,"Array",function(){return i}),e.d(n,"Note",function(){return r}),e.d(n,"Interval",function(){return o}),e.d(n,"Distance",function(){return u}),e.d(n,"Scale",function(){return c}),e.d(n,"Chord",function(){return l}),e.d(n,"PcSet",function(){return a}),e.d(n,"Dictionary",function(){return s});const En=At,wn=St,Tn=g,jn=A,On=E,_n=Wt,Sn=Xt},function(t,n,e){"use strict";const r=e(1),i=r.Chord.names(),o=e(0);t.exports={getChord:t=>{if("string"!=typeof t||o.isNote(t))return;const n={"4th":"4","5th":"5","7th":"7","9th":"9","11th":"11","13th":"13"};let e,u=t.split("-");return u[0].replace(/([a-gA-G][#|b]?)(.+)/,(t,o,a)=>{n[a]&&(a=n[a]),i.indexOf(a)>-1&&(e=r.chord(a).map(r.transpose(o+(u[1]||4))))}),e},chords:()=>{const t={4:"4th",5:"5th",7:"7th",9:"9th",11:"11th",13:"13th"};return i.map(n=>/^\d+$/.test(n)&&t[n]?t[n]:n)}}},function(t,n,e){"use strict";const r=e(4),i=e(0),o=e(2),u="undefined"!=typeof window&&e(6),a={"1n":512,"2n":256,"4n":128,"8n":64,"16n":32};t.exports=(t=>{if("string"==typeof(t=Object.assign({notes:["C4"],pattern:"x",accentMap:"",accentHi:127,accentLow:70,shuffle:!1,sizzle:!1,arpegiate:!1,subdiv:"4n"},t||{})).notes&&(t.notes=t.notes.replace(/\s{2,}/g," "),t.notes=t.notes.split(" ")),t.notes=t.notes.map(t=>(r(Array.isArray(t)||i.isNote(t)||o.getChord(t),"el must be a valid note, array of notes or a chord"),i.isNote(t)?[t]:(o.getChord(t)&&(t=o.getChord(t)),Array.isArray(t)&&t.forEach(t=>{r(i.isNote(t),"array must comprise valid notes")}),t))),r("string"==typeof t.pattern,"pattern should be a string"),r(!1===/[^x\-_\[\]]/.test(t.pattern),"pattern can only comprise x - _ [ ]"),t.shuffle&&(t.notes=i.shuffle(t.notes)),t.synth||t.instrument||t.sample||t.player||t.samples||t.sampler)return u(t);let n=[],e=0;const s=(r,i)=>{r.forEach(r=>{if("string"==typeof r){let o=null;"x"===r&&(o=t.notes[e],e++),"x"!==r&&"-"!==r||n.push({note:o,length:i,level:t.accentHi}),"_"===r&&n.length&&(n[n.length-1].length+=i),e===t.notes.length&&(e=0)}Array.isArray(r)&&s(r,i/r.length)})};return s(i.expandStr(t.pattern),a[t.subdiv]||a["4n"]),n})},function(t,n,e){"use strict";(function(n){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,n){if(t===n)return 0;for(var e=t.length,r=n.length,i=0,o=Math.min(e,r);i<o;++i)if(t[i]!==n[i]){e=t[i],r=n[i];break}return e<r?-1:r<e?1:0}function i(t){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=e(10),u=Object.prototype.hasOwnProperty,a=Array.prototype.slice,s="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=P,m=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t)){if(s)return t.name;var n=t.toString().match(m);return n&&n[1]}}function d(t,n){return"string"==typeof t?t.length<n?t:t.slice(0,n):t}function h(t){if(s||!o.isFunction(t))return o.inspect(t);var n=p(t);return"[Function"+(n?": "+n:"")+"]"}function M(t,n,e,r,i){throw new f.AssertionError({message:e,actual:t,expected:n,operator:r,stackStartFunction:i})}function P(t,n){t||M(t,!0,n,"==",f.ok)}function y(t,n,e,u){if(t===n)return!0;if(i(t)&&i(n))return 0===r(t,n);if(o.isDate(t)&&o.isDate(n))return t.getTime()===n.getTime();if(o.isRegExp(t)&&o.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(l(t)&&l(n)&&c(t)===c(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(i(t)!==i(n))return!1;var s=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===u.expected.indexOf(n)||(u.actual.push(t),u.expected.push(n),function(t,n,e,r){if(null===t||void 0===t||null===n||void 0===n)return!1;if(o.isPrimitive(t)||o.isPrimitive(n))return t===n;if(e&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(n))return!1;var i=g(t),u=g(n);if(i&&!u||!i&&u)return!1;if(i)return t=a.call(t),n=a.call(n),y(t,n,e);var s,c,l=A(t),f=A(n);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(s=l[c],!y(t[s],n[s],e,r))return!1;return!0}(t,n,e,u))}return e?t===n:t==n}function g(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,n){if(!t||!n)return!1;if("[object RegExp]"==Object.prototype.toString.call(n))return n.test(t);try{if(t instanceof n)return!0}catch(t){}return!Error.isPrototypeOf(n)&&!0===n.call({},t)}function b(t,n,e,r){var i;if("function"!=typeof n)throw new TypeError('"block" argument must be a function');"string"==typeof e&&(r=e,e=null),i=function(t){var n;try{t()}catch(t){n=t}return n}(n),r=(e&&e.name?" ("+e.name+").":".")+(r?" "+r:"."),t&&!i&&M(i,e,"Missing expected exception"+r);var u="string"==typeof r,a=!t&&o.isError(i),s=!t&&i&&!e;if((a&&u&&v(i,e)||s)&&M(i,e,"Got unwanted exception"+r),t&&i&&e&&!v(i,e)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(h(t.actual),128)+" "+t.operator+" "+d(h(t.expected),128)}(this),this.generatedMessage=!0);var n=t.stackStartFunction||M;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var e=new Error;if(e.stack){var r=e.stack,i=p(n),o=r.indexOf("\n"+i);if(o>=0){var u=r.indexOf("\n",o+1);r=r.substring(u+1)}this.stack=r}}},o.inherits(f.AssertionError,Error),f.fail=M,f.ok=P,f.equal=function(t,n,e){t!=n&&M(t,n,e,"==",f.equal)},f.notEqual=function(t,n,e){t==n&&M(t,n,e,"!=",f.notEqual)},f.deepEqual=function(t,n,e){y(t,n,!1)||M(t,n,e,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,n,e){y(t,n,!0)||M(t,n,e,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,n,e){y(t,n,!1)&&M(t,n,e,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(n,e,r){y(n,e,!0)&&M(n,e,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,n,e){t!==n&&M(t,n,e,"===",f.strictEqual)},f.notStrictEqual=function(t,n,e){t===n&&M(t,n,e,"!==",f.notStrictEqual)},f.throws=function(t,n,e){b(!0,t,n,e)},f.doesNotThrow=function(t,n,e){b(!1,t,n,e)},f.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var n=[];for(var e in t)u.call(t,e)&&n.push(e);return n}}).call(this,e(5))},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){const r=e(0);t.exports=(t=>{if(!t)throw new Error("No input params provided for sequence!");if(!t.pattern)throw new Error("No pattern provided!");if(!(t.player||t.instrument||t.sample||t.synth||t.sampler||t.samples))throw new Error("No player or instrument provided!");let n=[];return t.effects&&(n=t.effects.map(t=>new Tone[t])),n.push(new Tone.PanVol(t.pan||0,t.volume||-12)),t.sample&&(t.player=new Tone.Player(t.sample)),t.samples&&(t.sampler=new Tone.Sampler(t.samples)),t.synth&&(t.instrument=new Tone[t.synth]),t.player?(t.player.chain(...n,Tone.Master),new Tone.Sequence((t=>(n,e)=>{"x"===e&&t.start(n)})(t.player),r.expandStr(t.pattern),t.subdiv||"4n")):t.sampler?(t.sampler.chain(...n,Tone.Master),new Tone.Sequence((t=>{var n=0;return(e,r)=>{"x"===r&&t.notes[n]&&(t.sampler.triggerAttackRelease(t.notes[n],"8n",e),++n===t.notes.length&&(n=0))}})(t),r.expandStr(t.pattern),t.subdiv||"4n")):t.instrument?(t.instrument.chain(...n,Tone.Master),new Tone.Sequence(t.instrument.voices?(t=>{var n=0;return(e,r)=>{"x"===r&&t.notes[n]&&(t.instrument.triggerAttackRelease(t.notes[n],"8n",e),++n===t.notes.length&&(n=0))}})(t):(t=>{var n=0;return(e,r)=>{"x"===r&&t.notes[n]&&(t.instrument.triggerAttackRelease(t.notes[n][0],"8n",e),++n===t.notes.length&&(n=0))}})(t),r.expandStr(t.pattern),t.subdiv||"4n")):void 0})},function(t){t.exports={chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus:["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],diminished:["1P 2M 3m 4P 5d 6m 6M 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian:["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],spanish:["1P 2m 3M 4P 5P 6m 7m",["phrygian major"]],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]}},function(t){t.exports={4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],M:["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6:["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69:["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],Maddb9:["1P 3M 5P 9m"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"]}},function(t,n,e){"use strict";const r=e(1),i=e(2);t.exports={scale:r.Scale.notes,mode:r.Scale.notes,scales:r.Scale.names,modes:r.Scale.names,chord:i.getChord,chords:i.chords,clip:e(3),progression:e(14),midi:e(15),session:"undefined"!=typeof window&&e(19)}},function(t,n,e){(function(t,r){var i=/%[sdj%]/g;n.format=function(t){if(!P(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(a(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,o=r.length,u=String(t).replace(i,function(t){if("%%"===t)return"%";if(e>=o)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}}),s=r[e];e<o;s=r[++e])h(s)||!v(s)?u+=" "+s:u+=" "+a(s);return u},n.deprecate=function(e,i){if(y(t.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===r.noDeprecation)return e;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,u={};function a(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(e)?r.showHidden=e:e&&n._extend(r,e),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,t,r.depth)}function s(t,n){var e=a.styles[n];return e?"["+a.colors[e][0]+"m"+t+"["+a.colors[e][1]+"m":t}function c(t,n){return t}function l(t,e,r){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return P(i)||(i=l(t,i,r)),i}var o=function(t,n){if(y(n))return t.stylize("undefined","undefined");if(P(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}if(M(n))return t.stylize(""+n,"number");if(d(n))return t.stylize(""+n,"boolean");if(h(n))return t.stylize("null","null")}(t,e);if(o)return o;var u=Object.keys(e),a=function(t){var n={};return t.forEach(function(t,e){n[t]=!0}),n}(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(e)),A(e)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(e);if(0===u.length){if(x(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(g(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(b(e))return t.stylize(Date.prototype.toString.call(e),"date");if(A(e))return f(e)}var c,v="",E=!1,w=["{","}"];(p(e)&&(E=!0,w=["[","]"]),x(e))&&(v=" [Function"+(e.name?": "+e.name:"")+"]");return g(e)&&(v=" "+RegExp.prototype.toString.call(e)),b(e)&&(v=" "+Date.prototype.toUTCString.call(e)),A(e)&&(v=" "+f(e)),0!==u.length||E&&0!=e.length?r<0?g(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=E?function(t,n,e,r,i){for(var o=[],u=0,a=n.length;u<a;++u)j(n,String(u))?o.push(m(t,n,e,r,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(m(t,n,e,r,i,!0))}),o}(t,e,r,a,u):u.map(function(n){return m(t,e,r,a,n,E)}),t.seen.pop(),function(t,n,e){if(t.reduce(function(t,n){return 0,n.indexOf("\n")>=0&&0,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1];return e[0]+n+" "+t.join(", ")+" "+e[1]}(c,v,w)):w[0]+v+w[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function m(t,n,e,r,i,o){var u,a,s;if((s=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]}).get?a=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(a=t.stylize("[Setter]","special")),j(r,i)||(u="["+i+"]"),a||(t.seen.indexOf(s.value)<0?(a=h(e)?l(t,s.value,null):l(t,s.value,e-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),y(u)){if(o&&i.match(/^\d+$/))return a;(u=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function h(t){return null===t}function M(t){return"number"==typeof t}function P(t){return"string"==typeof t}function y(t){return void 0===t}function g(t){return v(t)&&"[object RegExp]"===E(t)}function v(t){return"object"==typeof t&&null!==t}function b(t){return v(t)&&"[object Date]"===E(t)}function A(t){return v(t)&&("[object Error]"===E(t)||t instanceof Error)}function x(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function w(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(y(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!u[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var e=r.pid;u[t]=function(){var r=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,r)}}else u[t]=function(){};return u[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=d,n.isNull=h,n.isNullOrUndefined=function(t){return null==t},n.isNumber=M,n.isString=P,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=y,n.isRegExp=g,n.isObject=v,n.isDate=b,n.isError=A,n.isFunction=x,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=e(12);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.log=function(){console.log("%s - %s",function(){var t=new Date,n=[w(t.getHours()),w(t.getMinutes()),w(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],n].join(" ")}(),n.format.apply(n,arguments))},n.inherits=e(13),n._extend=function(t,n){if(!n||!v(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(this,e(5),e(11))},function(t,n){var e,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,c=[],l=!1,f=-1;function m(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(m);l=!0;for(var n=c.length;n;){for(s=c,c=[];++f<n;)s&&s[f].run();f=-1,n=c.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function h(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new d(t,n)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n,e){"use strict";const r=e(1),i={I:{idx:0,name:"M"},II:{idx:1,name:"M"},III:{idx:2,name:"M"},IV:{idx:3,name:"M"},V:{idx:4,name:"M"},VI:{idx:5,name:"M"},VII:{idx:6,name:"M"},i:{idx:0,name:"m"},ii:{idx:1,name:"m"},iii:{idx:2,name:"m"},iv:{idx:3,name:"m"},v:{idx:4,name:"m"},vi:{idx:5,name:"m"},vii:{idx:6,name:"m"},I7:{idx:0,name:"Maj7"},II7:{idx:1,name:"Maj7"},III7:{idx:2,name:"Maj7"},IV7:{idx:3,name:"Maj7"},V7:{idx:4,name:"Maj7"},VI7:{idx:5,name:"Maj7"},VII7:{idx:6,name:"Maj7"},i7:{idx:0,name:"m7"},ii7:{idx:1,name:"m7"},iii7:{idx:2,name:"m7"},iv7:{idx:3,name:"m7"},v7:{idx:4,name:"m7"},vi7:{idx:5,name:"m7"},vii7:{idx:6,name:"m7"}};t.exports=((t,n)=>{const e=t.split(" ");e[0].match(/\d/)||(e[0]+="4",t=e.join(" "));const o=r.Scale.notes(t);return n.replace(/\s*,+\s*/g," ").split(" ").map((t,n)=>{const e=i[t],r=o[i[t].idx],u=r.replace(/\D+/,"");return r.replace(/\d/,"")+e.name+"-"+u}).toString().replace(/,/g," ")})},function(t,n,e){"use strict";const r=e(16),i=e(4),o=e(17);t.exports=((t,n)=>{i(Array.isArray(t),"You must provide an array of notes to write!"),n=n||"music.mid";let e=new o.File,u=new o.Track;e.addTrack(u),t.forEach(t=>{let n=t.level||127;t.note?"string"==typeof t.note?(u.noteOn(0,t.note,t.length,n),u.noteOff(0,t.note,t.length,n)):u.addChord(0,t.note,t.length,n):u.noteOff(0,"",t.length)}),r.writeFileSync(n,e.toBytes(),"binary"),console.log("MIDI file generated:",n)})},function(t,n){},function(t,n,e){(function(t){var e={};!function(t){var n=t.DEFAULT_VOLUME=90,e=(t.DEFAULT_DURATION=128,t.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(t){var n=/([a-g])(#+|b+)?([0-9]+)$/i.exec(t),r=n[1].toLowerCase(),i=n[2]||"";return 12*parseInt(n[3],10)+e.midi_letter_pitches[r]+("#"==i.substr(0,1)?1:-1)*i.length},ensureMidiPitch:function(t){return"number"!=typeof t&&/[^0-9]/.test(t)?e.midiPitchFromNote(t):parseInt(t,10)},midi_pitches_letter:{12:"c",13:"c#",14:"d",15:"d#",16:"e",17:"f",18:"f#",19:"g",20:"g#",21:"a",22:"a#",23:"b"},midi_flattened_notes:{"a#":"bb","c#":"db","d#":"eb","f#":"gb","g#":"ab"},noteFromMidiPitch:function(t,n){var r,i=0,o=t;n=n||!1;return t>23&&(o=t-12*(i=Math.floor(t/12)-1)),r=e.midi_pitches_letter[o],n&&r.indexOf("#")>0&&(r=e.midi_flattened_notes[r]),r+i},mpqnFromBpm:function(t){var n=Math.floor(6e7/t),e=[];do{e.unshift(255&n),n>>=8}while(n);for(;e.length<3;)e.push(0);return e},bpmFromMpqn:function(t){if(void 0!==t[0]){0;for(var n=0,e=t.length-1;e>=0;++n,--e)t[n]<<e}return Math.floor(6e7/t)},codes2Str:function(t){return String.fromCharCode.apply(null,t)},str2Bytes:function(t,n){if(n)for(;t.length/2<n;)t="0"+t;for(var e=[],r=t.length-1;r>=0;r-=2){var i=0===r?t[r]:t[r-1]+t[r];e.unshift(parseInt(i,16))}return e},translateTickTime:function(t){for(var n=127&t;t>>=7;)n<<=8,n|=127&t|128;for(var e=[];e.push(255&n),128&n;)n>>=8;return e}}),r=function(t){if(!this)return new r(t);!t||null===t.type&&void 0===t.type||null===t.channel&&void 0===t.channel||null===t.param1&&void 0===t.param1||(this.setTime(t.time),this.setType(t.type),this.setChannel(t.channel),this.setParam1(t.param1),this.setParam2(t.param2))};r.NOTE_OFF=128,r.NOTE_ON=144,r.AFTER_TOUCH=160,r.CONTROLLER=176,r.PROGRAM_CHANGE=192,r.CHANNEL_AFTERTOUCH=208,r.PITCH_BEND=224,r.prototype.setTime=function(t){this.time=e.translateTickTime(t||0)},r.prototype.setType=function(t){if(t<r.NOTE_OFF||t>r.PITCH_BEND)throw new Error("Trying to set an unknown event: "+t);this.type=t},r.prototype.setChannel=function(t){if(t<0||t>15)throw new Error("Channel is out of bounds.");this.channel=t},r.prototype.setParam1=function(t){this.param1=t},r.prototype.setParam2=function(t){this.param2=t},r.prototype.toBytes=function(){var t=[],n=this.type|15&this.channel;return t.push.apply(t,this.time),t.push(n),t.push(this.param1),void 0!==this.param2&&null!==this.param2&&t.push(this.param2),t};var i=function(t){if(!this)return new i(t);this.setTime(t.time),this.setType(t.type),this.setData(t.data)};i.SEQUENCE=0,i.TEXT=1,i.COPYRIGHT=2,i.TRACK_NAME=3,i.INSTRUMENT=4,i.LYRIC=5,i.MARKER=6,i.CUE_POINT=7,i.CHANNEL_PREFIX=32,i.END_OF_TRACK=47,i.TEMPO=81,i.SMPTE=84,i.TIME_SIG=88,i.KEY_SIG=89,i.SEQ_EVENT=127,i.prototype.setTime=function(t){this.time=e.translateTickTime(t||0)},i.prototype.setType=function(t){this.type=t},i.prototype.setData=function(t){this.data=t},i.prototype.toBytes=function(){if(!this.type)throw new Error("Type for meta-event not specified.");var t=[];if(t.push.apply(t,this.time),t.push(255,this.type),Array.isArray(this.data))t.push(this.data.length),t.push.apply(t,this.data);else if("number"==typeof this.data)t.push(1,this.data);else if(null!==this.data&&void 0!==this.data){t.push(this.data.length);var n=this.data.split("").map(function(t){return t.charCodeAt(0)});t.push.apply(t,n)}else t.push(0);return t};var o=function(t){if(!this)return new o(t);var n=t||{};this.events=n.events||[]};o.START_BYTES=[77,84,114,107],o.END_BYTES=[0,255,47,0],o.prototype.addEvent=function(t){return this.events.push(t),this},o.prototype.addNoteOn=o.prototype.noteOn=function(t,i,o,u){return this.events.push(new r({type:r.NOTE_ON,channel:t,param1:e.ensureMidiPitch(i),param2:u||n,time:o||0})),this},o.prototype.addNoteOff=o.prototype.noteOff=function(t,i,o,u){return this.events.push(new r({type:r.NOTE_OFF,channel:t,param1:e.ensureMidiPitch(i),param2:u||n,time:o||0})),this},o.prototype.addNote=o.prototype.note=function(t,n,e,r,i){return this.noteOn(t,n,r,i),e&&this.noteOff(t,n,e,i),this},o.prototype.addChord=o.prototype.chord=function(t,n,e,r){if(!Array.isArray(n)&&!n.length)throw new Error("Chord must be an array of pitches");return n.forEach(function(n){this.noteOn(t,n,0,r)},this),n.forEach(function(n,r){0===r?this.noteOff(t,n,e):this.noteOff(t,n)},this),this},o.prototype.setInstrument=o.prototype.instrument=function(t,n,e){return this.events.push(new r({type:r.PROGRAM_CHANGE,channel:t,param1:n,time:e||0})),this},o.prototype.setTempo=o.prototype.tempo=function(t,n){return this.events.push(new i({type:i.TEMPO,data:e.mpqnFromBpm(t),time:n||0})),this},o.prototype.toBytes=function(){var t=0,n=[],r=o.START_BYTES,i=o.END_BYTES;this.events.forEach(function(e){var r=e.toBytes();t+=r.length,n.push.apply(n,r)}),t+=i.length;var u=e.str2Bytes(t.toString(16),4);return r.concat(u,n,i)};var u=function(t){if(!this)return new u(t);var n=t||{};if(n.ticks){if("number"!=typeof n.ticks)throw new Error("Ticks per beat must be a number!");if(n.ticks<=0||n.ticks>=32768||n.ticks%1!=0)throw new Error("Ticks per beat must be an integer between 1 and 32767!")}this.ticks=n.ticks||128,this.tracks=n.tracks||[]};u.HDR_CHUNKID="MThd",u.HDR_CHUNK_SIZE="\0\0\0",u.HDR_TYPE0="\0\0",u.HDR_TYPE1="\0",u.prototype.addTrack=function(t){return t?(this.tracks.push(t),this):(t=new o,this.tracks.push(t),t)},u.prototype.toBytes=function(){var t=this.tracks.length.toString(16),n=u.HDR_CHUNKID+u.HDR_CHUNK_SIZE;return parseInt(t,16)>1?n+=u.HDR_TYPE1:n+=u.HDR_TYPE0,n+=e.codes2Str(e.str2Bytes(t,2)),n+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach(function(t){n+=e.codes2Str(t.toBytes())}),n},t.Util=e,t.File=u,t.Track=o,t.Event=r,t.MetaEvent=i}(e),void 0!==t&&null!==t?t.exports=e:void 0!==n&&null!==n?n=e:this.Midi=e}).call(this,e(18)(t))},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){const r=e(3);e(6);class i{constructor(t){this.idx=t.idx,this._activePatternIdx=-1,this._clips=[],t.sample&&(this.player=new Tone.Player(t.sample),this.player.toMaster()),t.synth&&(this.instrument=new Tone[t.synth],this.instrument.toMaster()),t.samples&&(this.sampler=new Tone.Sampler(t.samples),this.sampler.toMaster()),t.clips.forEach(this.addClip,this)}get clips(){return this._clips}startClip(t){if(this._activePatternIdx>-1&&this._activePatternIdx!==t&&this.stopClip(this._activePatternIdx),this._clips[t]&&"started"!==this._clips[t].state){this._activePatternIdx=t;let n=Tone.Transport.nextSubdivision("4n");this._clips[t].start(n)}}stopClip(t){this._clips[t].stop(Tone.Transport.nextSubdivision("4n"))}addClip(t,n){n=n||this._clips.length,t.pattern?this._clips[n]=r(Object.assign({player:this.player,instrument:this.instrument,sampler:this.sampler},t)):this._clips[n]=null}get activeClipIdx(){return this._activePatternIdx}}t.exports=(t=>new class{constructor(t){t=t||[],this._channels=t.map((t,n)=>(t.idx=t.idx||n,new i(t)))}createChannel(t){t.idx=t.idx||this._channels.length,this._channels.push(new i(t))}get channels(){return this._channels}startRow(t){this._channels.forEach(n=>{n.startClip(t)})}}(t))}])});